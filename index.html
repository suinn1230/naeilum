<div id="app" style="font-family: Pretendard, system-ui, sans-serif; text-align: center; margin-top: 60px;">
  <h2>Naeilum 내일:음</h2>
  <p>Write down your name to begin</p>

  <!-- Name inputs -->
  <div style="display:inline-block; text-align:left; padding: 12px 16px; border:1px solid #eee; border-radius:12px;">
    <label style="display:block; margin:6px 0 4px;">First Name</label>
    <input id="firstName" type="text" placeholder="e.g., Daniel"
           style="padding:10px; width:260px; border-radius:10px; border:1px solid #ccc;">

    <label style="display:block; margin:12px 0 4px;">Last Name</label>
    <input id="lastName" type="text" placeholder="e.g., Smith"
           style="padding:10px; width:260px; border-radius:10px; border:1px solid #ccc;">

    <!-- Gender (replaces 'optional personality') -->
    <div style="margin-top:14px;">
      <span style="display:block; margin-bottom:8px; font-weight:600;">Select your gender</span>
      <label style="margin-right:16px;">
        <input type="radio" name="gender" value="male"> Male
      </label>
      <label>
        <input type="radio" name="gender" value="female"> Female
      </label>
    </div>

    <!-- Begin button -->
    <button id="beginBtn" onclick="generateName()"
            style="display:block; margin-top:18px; padding:12px 18px; background-color:#4CAF50; color:white; border:none; border-radius:10px; cursor:pointer; width:260px;">
      Begin
    </button>
  </div>

  <div id="result" style="margin-top:32px;"></div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxxxxxxxxxxxx/exec"; // ← 여기에 본인 Apps Script 웹앱 URL

async function generateName() {
  const first = document.getElementById("firstName").value.trim();
  const last  = document.getElementById("lastName").value.trim();
  const genderEl = document.querySelector('input[name="gender"]:checked');
  const gender = genderEl ? genderEl.value : null;

  if (!first && !last) {
    alert("Please enter at least First or Last name.");
    return;
  }
  if (!gender) {
    alert("Please select your gender.");
    return;
  }

  const inputName = `${first} ${last}`.trim();
  const resultBox = document.getElementById("result");
  const btn = document.getElementById("beginBtn");

  resultBox.innerHTML = "⏳ Generating Korean names...";
  btn.disabled = true;

  try {
  // 사용자가 입력한 이름과 성별 읽기
  const first = document.getElementById("firstName").value.trim();
  const last  = document.getElementById("lastName").value.trim();
  const genderEl = document.querySelector('input[name="gender"]:checked');
  const gender = genderEl ? genderEl.value : null;

  if (!first && !last) {
    alert("Please enter at least First or Last name.");
    btn.disabled = false;
    return;
  }
  if (!gender) {
    alert("Please select your gender.");
    btn.disabled = false;
    return;
  }

  // meaning.html로 이동 (입력값을 URL에 포함)
  const query = `https://emilleschegg.github.io/naeilum-name-generator/meaning.html?name=${encodeURIComponent(first || last)}&gender=${gender}`;
window.location.href = query;

} catch (e) {
  console.error(e);
  alert("Something went wrong. Please try again.");
} finally {
  btn.disabled = false;
}

}

// Press Enter to begin (convenience)
["firstName", "lastName"].forEach(id => {
  document.getElementById(id).addEventListener("keydown", (e) => {
    if (e.key === "Enter") generateName();
  });
});
</script>


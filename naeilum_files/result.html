<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Your Korean Name | Naeilum</title>
<link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
<style>
body {font-family:Pretendard,sans-serif;text-align:center;margin:60px;background:#fafafa;}
h2{color:#333;}
.result-container{display:flex;justify-content:center;gap:25px;margin-top:50px;flex-wrap:wrap;}
.card{width:220px;border:1px solid #ccc;border-radius:12px;background:#fff;padding:20px;
box-shadow:0 3px 6px rgba(0,0,0,0.1);text-align:center;transition:transform 0.2s;}
.card:hover{transform:translateY(-5px);}
.card h3{font-size:22px;color:#333;margin-bottom:5px;}
.card p{margin:4px 0;color:#555;}
.card .meaning{color:#4CAF50;font-weight:600;}
</style>
</head>
<body>
<h2>âœ¨ Your Korean Name Recommendations âœ¨</h2>
<div id="results" class="result-container"></div>
<script>
const params = new URLSearchParams(window.location.search);
const engName = params.get("name")?.trim() || "";
const gender = params.get("gender") || "female";
const meaning = params.get("meaning");

const initialMap = {a:"ã…‡",e:"ã…‡",i:"ã…‡",o:"ã…‡",u:"ã…‡",b:"ã…‚",p:"ã…‚",c:"ã…‹",k:"ã…‹",q:"ã…‹",d:"ã„·",t:"ã„·",
f:"ã…",v:"ã…",g:"ã„±",h:"ã…Ž",j:"ã…ˆ",l:"ã„¹",r:"ã„¹",m:"ã…",n:"ã„´",s:"ã……",w:"ã…‡",y:"ã…‡",x:"ã……",z:"ã…ˆ"};
const firstLetter = engName[0]?.toLowerCase();
const targetInitial = initialMap[firstLetter] || "ã…‡";
const csvFile = gender === "male" ? "male_names.csv" : "female_names.csv";

fetch(csvFile)
.then(res=>res.text())
.then(text=>{
 const rows=text.split("\n").slice(1);
 const data=rows.map(line=>{
   const [name,hanja,mean]=line.split(",");
   return {name:name?.trim(),hanja:hanja?.trim(),mean:mean?.trim()};
 });
 let filtered=data.filter(r=>r.mean?.toLowerCase()===meaning.toLowerCase());
 const choList={"ã„±":["ê°€","ê°•","ê³ ","ê³µ","ê¶Œ","ê¸°","ê±´"],"ã„´":["ë‚˜","ë…¸","ë‚¨","ëˆ„","ë‹ˆ"],"ã„·":["ë‹¤","ë„","ë™","ë‘"],
"ã„¹":["ë¼","ë¡œ","ë¥˜","ë¦¬"],"ã…":["ë§ˆ","ë¯¼","ëª…","ë¯¸","ë¬¸"],"ã…‚":["ë°•","ë°°","ë°±","ë³´","ë¹ˆ"],"ã……":["ì„œ","ì†Œ","ìˆ˜","ì‹œ","ì„ "],
"ã…‡":["ì•„","ì•ˆ","ì˜¤","ìš°","ìœ ","ì€","ì´","ì—¬","ìœ¤"],"ã…ˆ":["ì§€","ì£¼","ì§„","ìž¬","ì¤€","ì œ"],"ã…Š":["ì°¨","ì±„","ì´ˆ"],
"ã…‹":["ê·œ","ê¸°","ê²½"],"ã…Œ":["íƒœ","íƒ"],"ã…":["í‘œ","í•„","í’"],"ã…Ž":["í•˜","í˜„","í˜œ","íš¨"]};
 const possible=choList[targetInitial]||[];
 filtered=filtered.filter(r=>possible.some(s=>r.name.startsWith(s)));
 const shuffled=filtered.sort(()=>Math.random()-0.5).slice(0,3);
 const html=shuffled.map(r=>`<div class="card"><h3>${r.name}</h3><p>${r.hanja}</p><p class="meaning">${r.mean}</p></div>`).join("");
 document.getElementById("results").innerHTML=html||"<p>No matching names found ðŸ˜¢</p>";
})
.catch(err=>{console.error(err);document.getElementById("results").innerHTML="<p>Error loading name data.</p>";});
</script>
</body></html>